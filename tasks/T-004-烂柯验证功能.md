# T-004: 烂柯验证功能

> 文件名：T-004-烂柯验证功能.md

---

## 目标

通过烂柯神机150局验证，确保规则验证100%正确，包括和棋判定、困毙判定等边界情况。

---

## 验收标准（必须可测试）

- [ ] 烂柯神机150局测试全部通过
- [ ] 实现长将检测（连续将军6次判负）
- [ ] 实现50回合无吃子判和
- [ ] 实现三次重复局面判和
- [ ] 实现困毙判定（无子可动但未被将军）

---

## 技术方案（极简）

- 扩展validator.js添加和棋/困毙检测
- 历史记录跟踪将军次数、吃子、局面哈希
- 烂柯神机测试套件（lanke-validator.test.js）
- 详见：tech_spec.md#烂柯验证

---

## 进度

| 时间 | 事件 | 状态 |
|:---:|:---|:---:|
| 2026-02-09 | 烂柯验证开发启动 | ✅ |
| 2026-02-09 | 将军/应将完整检测 | ✅ |
| 2026-02-09 | 和棋判定实现 | ✅ |
| 2026-02-09 | 150局测试全部通过 | ✅ |

---

## 提交记录

- `f6g7h8i`: test: 烂柯神机150局测试套件
- `g7h8i9j`: feat: 完整将军应将验证
- `h8i9j0k`: feat: 和棋/困毙判定
- `i9j0k1l`: fix: 修复边界规则问题，150局通过

---

## 部署信息

- **时间**：2026-02-09
- **环境**：development
- **备注**：M4里程碑完成

---

*Task v1.0 | 极简但够用*
